<div id="live-trades" class="space-y-3">
  <div class="flex items-center justify-between">
    <h2 class="text-lg font-semibold">Live сделки</h2>
    <button type="button" class="text-xs text-indigo-600 hover:underline" onclick="refreshPanel('live-trades-box')">Обновить</button>
  </div>
  {% if trades %}
    <div class="overflow-x-auto">
      <table class="min-w-full text-xs border border-gray-200 rounded">
        <thead class="bg-gray-100 text-gray-600">
          <tr>
            <th class="px-2 py-1 text-left">Время</th>
            <th class="px-2 py-1 text-left">Символ</th>
            <th class="px-2 py-1 text-left">Стратегия</th>
            <th class="px-2 py-1 text-left">Сторона</th>
            <th class="px-2 py-1 text-right">Qty</th>
            <th class="px-2 py-1 text-right">Цена</th>
            <th class="px-2 py-1 text-right">Notional</th>
            <th class="px-2 py-1 text-left">Статус</th>
            <th class="px-2 py-1 text-left">Req</th>
          </tr>
        </thead>
        <tbody>
          {% for trade in trades %}
            {% set side_cls = 'text-emerald-600' if trade.side == 'buy' else ('text-rose-600' if trade.side == 'sell' else 'text-gray-600') %}
            <tr class="border-t">
              <td class="px-2 py-1 font-mono text-gray-600">{{ trade.ts }}</td>
              <td class="px-2 py-1">{{ trade.symbol }}</td>
              <td class="px-2 py-1">{{ trade.strategy }}</td>
              <td class="px-2 py-1 {{ side_cls }}">{{ trade.side or '—' }}</td>
              <td class="px-2 py-1 text-right">{{ trade.quantity if trade.quantity is not none else '—' }}</td>
              <td class="px-2 py-1 text-right">{{ trade.price if trade.price is not none else '—' }}</td>
              <td class="px-2 py-1 text-right">{{ trade.notional if trade.notional is not none else '—' }}</td>
              <td class="px-2 py-1">{{ trade.status if trade.status else ( 'OK' if trade.executed else (trade.error or '—')) }}</td>
              <td class="px-2 py-1 font-mono text-gray-500">{{ trade.request_id or '—' }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="text-sm text-gray-500">Нет сделок за выбранный период.</div>
  {% endif %}
</div>
