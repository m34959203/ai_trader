<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Trader - Monitoring Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header-left {
            flex: 1;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header .status {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2em;
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .lang-switcher {
            display: flex;
            gap: 5px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px;
            border-radius: 8px;
        }

        .lang-btn {
            background: transparent;
            color: white;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .lang-btn.active {
            background: rgba(255, 255, 255, 0.3);
        }

        .help-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1em;
            transition: all 0.2s;
        }

        .help-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: #1e293b;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #334155;
            transition: all 0.3s;
            position: relative;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
            border-color: #475569;
        }

        .card h3 {
            color: #94a3b8;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background: rgba(100, 116, 139, 0.3);
            border-radius: 50%;
            font-size: 12px;
            cursor: help;
            color: #94a3b8;
            font-weight: bold;
            transition: all 0.2s;
        }

        .info-icon:hover {
            background: rgba(100, 116, 139, 0.5);
            transform: scale(1.1);
        }

        .tooltip {
            position: relative;
        }

        .tooltiptext {
            visibility: hidden;
            width: 280px;
            background-color: #334155;
            color: #e2e8f0;
            text-align: left;
            border-radius: 8px;
            padding: 12px;
            position: absolute;
            z-index: 1000;
            top: 100%;
            left: 0;
            margin-top: 8px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em;
            line-height: 1.5;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 1px solid #475569;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .metric-label {
            color: #64748b;
            font-size: 0.9em;
        }

        .positive { color: #10b981; }
        .negative { color: #ef4444; }
        .neutral { color: #3b82f6; }

        .health-checks {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .health-check {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #0f172a;
            border-radius: 8px;
            border-left: 3px solid #10b981;
        }

        .health-check.degraded { border-left-color: #f59e0b; }
        .health-check.unhealthy { border-left-color: #ef4444; }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        .trades-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .trades-table th {
            background: #0f172a;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #94a3b8;
            border-bottom: 2px solid #334155;
        }

        .trades-table td {
            padding: 12px;
            border-bottom: 1px solid #334155;
        }

        .badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .badge.success { background: #10b98120; color: #10b981; }
        .badge.warning { background: #f59e0b20; color: #f59e0b; }
        .badge.error { background: #ef444420; color: #ef4444; }

        .last-update {
            color: #64748b;
            font-size: 0.85em;
            margin-top: 20px;
            text-align: center;
        }

        .alert-banner {
            background: #ef444420;
            border: 2px solid #ef4444;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }

        .alert-banner.show {
            display: block;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #64748b;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: #1e293b;
            margin: 5% auto;
            padding: 40px;
            border: 1px solid #475569;
            border-radius: 15px;
            width: 90%;
            max-width: 900px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #334155;
        }

        .modal-header h2 {
            font-size: 2em;
            color: #e2e8f0;
        }

        .close {
            color: #94a3b8;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .close:hover,
        .close:focus {
            color: #e2e8f0;
            transform: scale(1.1);
        }

        .help-section {
            margin-bottom: 30px;
        }

        .help-section h3 {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .help-section ul {
            margin-left: 20px;
            line-height: 2;
        }

        .help-section li {
            margin-bottom: 10px;
            color: #cbd5e1;
        }

        .help-section strong {
            color: #10b981;
        }

        .help-section code {
            background: #0f172a;
            padding: 2px 8px;
            border-radius: 4px;
            color: #3b82f6;
            font-family: 'Courier New', monospace;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .feature-item {
            background: #0f172a;
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .modal-content {
                padding: 20px;
                margin: 10% auto;
            }

            .tooltiptext {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1 id="headerTitle">üöÄ AI Trader - Monitoring Dashboard</h1>
            <div class="status">
                <div class="status-indicator" id="statusIndicator"></div>
                <span id="statusText">System Healthy</span>
            </div>
        </div>
        <div class="header-controls">
            <div class="lang-switcher">
                <button class="lang-btn active" onclick="switchLanguage('en')" id="btnEn">EN</button>
                <button class="lang-btn" onclick="switchLanguage('ru')" id="btnRu">RU</button>
            </div>
            <button class="help-btn" onclick="openHelp()" id="helpBtn">‚ùì Help</button>
        </div>
    </div>

    <div class="alert-banner" id="alertBanner">
        <strong>‚ö†Ô∏è <span id="alertLabel">Alert</span>:</strong> <span id="alertMessage"></span>
    </div>

    <!-- Key Metrics -->
    <div class="grid">
        <div class="card">
            <h3 class="tooltip">
                <span id="metricPortfolio">Portfolio Value</span>
                <span class="info-icon">?</span>
                <span class="tooltiptext" id="tooltipPortfolio">Total value of your trading portfolio including cash and open positions. Updates in real-time.</span>
            </h3>
            <div class="metric-value positive" id="portfolioValue">$0</div>
            <div class="metric-label"><span id="labelDailyPnl">Today's P&L</span>: <span id="dailyPnl" class="neutral">$0 (0%)</span></div>
        </div>

        <div class="card">
            <h3 class="tooltip">
                <span id="metricPositions">Active Positions</span>
                <span class="info-icon">?</span>
                <span class="tooltiptext" id="tooltipPositions">Number of currently open trading positions. Monitor to ensure proper diversification.</span>
            </h3>
            <div class="metric-value neutral" id="positionCount">0</div>
            <div class="metric-label"><span id="labelExposure">Total exposure</span>: <span id="exposure">0%</span></div>
        </div>

        <div class="card">
            <h3 class="tooltip">
                <span id="metricTrades">Total Trades</span>
                <span class="info-icon">?</span>
                <span class="tooltiptext" id="tooltipTrades">Total number of executed trades. Track your trading activity and frequency.</span>
            </h3>
            <div class="metric-value" id="tradeCount">0</div>
            <div class="metric-label"><span id="labelWinRate">Win rate</span>: <span id="winRate">0%</span></div>
        </div>

        <div class="card">
            <h3 class="tooltip">
                <span id="metricPerformance">System Performance</span>
                <span class="info-icon">?</span>
                <span class="tooltiptext" id="tooltipPerformance">Average trade execution latency. Lower is better. Target: <50ms for optimal execution.</span>
            </h3>
            <div class="metric-value neutral" id="avgLatency">0ms</div>
            <div class="metric-label" id="labelAvgLatency">Avg execution latency</div>
        </div>
    </div>

    <!-- Health Checks -->
    <div class="card">
        <h3 class="tooltip">
            <span id="healthTitle">System Health</span>
            <span class="info-icon">?</span>
            <span class="tooltiptext" id="tooltipHealth">Real-time health status of critical system components: database, ML models, risk engine, and system resources.</span>
        </h3>
        <div class="health-checks" id="healthChecks">
            <div class="loading" id="loadingHealth">Loading health checks...</div>
        </div>
    </div>

    <!-- Performance Chart -->
    <div class="card">
        <h3 class="tooltip">
            <span id="chartTitle">Portfolio Performance (24h)</span>
            <span class="info-icon">?</span>
            <span class="tooltiptext" id="tooltipChart">Real-time portfolio value over the last 24 hours. Track your performance visually.</span>
        </h3>
        <div class="chart-container">
            <canvas id="perfChart"></canvas>
        </div>
    </div>

    <!-- Recent Trades -->
    <div class="card">
        <h3 class="tooltip">
            <span id="tradesTitle">Recent Trades</span>
            <span class="info-icon">?</span>
            <span class="tooltiptext" id="tooltipTrades2">Most recent trading activity with execution details and P&L results.</span>
        </h3>
        <table class="trades-table">
            <thead>
                <tr>
                    <th id="thTime">Time</th>
                    <th id="thSymbol">Symbol</th>
                    <th id="thSide">Side</th>
                    <th id="thQuantity">Quantity</th>
                    <th id="thPrice">Price</th>
                    <th id="thPnl">P&L</th>
                    <th id="thStatus">Status</th>
                </tr>
            </thead>
            <tbody id="tradesTable">
                <tr>
                    <td colspan="7" class="loading" id="loadingTrades">No trades yet</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="last-update">
        <span id="labelLastUpdate">Last updated</span>: <span id="lastUpdate">Never</span>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="helpModalTitle">üìñ Dashboard Help Guide</h2>
                <span class="close" onclick="closeHelp()">&times;</span>
            </div>

            <div class="help-section">
                <h3 id="helpWhatIs">üéØ What is this?</h3>
                <p id="helpWhatIsText" style="color: #cbd5e1; line-height: 1.8; margin-top: 10px;">
                    This is a real-time monitoring dashboard for your AI-powered trading system. It provides comprehensive visibility into your portfolio performance, system health, trading activity, and risk metrics. All data updates automatically via WebSocket connection.
                </p>
            </div>

            <div class="help-section">
                <h3 id="helpMetrics">üìä Key Metrics</h3>
                <div class="feature-grid">
                    <div class="feature-item">
                        <strong id="helpPortfolio">Portfolio Value</strong>
                        <p id="helpPortfolioText" style="font-size: 0.9em; margin-top: 8px; color: #94a3b8;">Total value of all assets. Includes cash and positions.</p>
                    </div>
                    <div class="feature-item">
                        <strong id="helpPositions">Active Positions</strong>
                        <p id="helpPositionsText" style="font-size: 0.9em; margin-top: 8px; color: #94a3b8;">Number of open trades. Monitor diversification.</p>
                    </div>
                    <div class="feature-item">
                        <strong id="helpTrades">Total Trades</strong>
                        <p id="helpTradesText" style="font-size: 0.9em; margin-top: 8px; color: #94a3b8;">Trading activity count. Track frequency.</p>
                    </div>
                    <div class="feature-item">
                        <strong id="helpWinRate">Win Rate</strong>
                        <p id="helpWinRateText" style="font-size: 0.9em; margin-top: 8px; color: #94a3b8;">Percentage of profitable trades. Target: >55%</p>
                    </div>
                </div>
            </div>

            <div class="help-section">
                <h3 id="helpHealth">üè• Health Checks</h3>
                <ul id="helpHealthList">
                    <li><strong>System Resources</strong> - CPU, RAM, disk usage monitoring</li>
                    <li><strong>Database</strong> - Connection and query performance</li>
                    <li><strong>ML Models</strong> - LSTM and Meta-Learner availability</li>
                    <li><strong>Risk Engine</strong> - Kelly, correlation, gap protection status</li>
                </ul>
                <p id="helpHealthStatus" style="margin-top: 10px; color: #cbd5e1;">
                    <strong style="color: #10b981;">Healthy</strong> - All systems operational |
                    <strong style="color: #f59e0b;">Degraded</strong> - Some issues detected |
                    <strong style="color: #ef4444;">Unhealthy</strong> - Critical failure
                </p>
            </div>

            <div class="help-section">
                <h3 id="helpFeatures">‚ö° System Features</h3>
                <ul id="helpFeaturesList">
                    <li><strong>ML Ensemble</strong> - LSTM + Technical indicators (70/30 blend)</li>
                    <li><strong>Meta-Learner</strong> - XGBoost filter removes 40-50% losing trades</li>
                    <li><strong>Advanced Risk</strong> - Kelly Criterion + Correlation + Gap Protection</li>
                    <li><strong>Strategies</strong> - EMA, RSI, Bollinger, Ichimoku, VWAP</li>
                    <li><strong>Realistic Slippage</strong> - 0.05-0.2% based on volume/volatility</li>
                    <li><strong>Real-time Updates</strong> - WebSocket connection every 2 seconds</li>
                </ul>
            </div>

            <div class="help-section">
                <h3 id="helpApi">üîó API Endpoints</h3>
                <ul id="helpApiList">
                    <li><code>GET /api/monitoring/health</code> - System health status</li>
                    <li><code>GET /api/monitoring/metrics</code> - All metrics summary</li>
                    <li><code>GET /api/monitoring/metrics/{name}</code> - Specific metric stats</li>
                    <li><code>GET /api/monitoring/metrics/{name}/timeseries</code> - Historical data</li>
                    <li><code>WS /api/monitoring/ws</code> - Real-time WebSocket updates</li>
                </ul>
            </div>

            <div class="help-section">
                <h3 id="helpTips">üí° Tips</h3>
                <ul id="helpTipsList">
                    <li>Monitor <strong>Win Rate</strong> - aim for >55% for consistent profitability</li>
                    <li>Watch <strong>Health Status</strong> - address degraded systems promptly</li>
                    <li>Track <strong>Exposure</strong> - keep portfolio risk under control</li>
                    <li>Check <strong>Execution Latency</strong> - ensure fast trade execution</li>
                    <li>Review <strong>Recent Trades</strong> - validate strategy performance</li>
                    <li>Use <strong>Language Switch</strong> - toggle between English and Russian</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                headerTitle: 'üöÄ AI Trader - Monitoring Dashboard',
                statusHealthy: 'System Healthy',
                statusDegraded: 'System Degraded',
                statusUnhealthy: 'System Unhealthy',
                alertLabel: 'Alert',
                metricPortfolio: 'Portfolio Value',
                tooltipPortfolio: 'Total value of your trading portfolio including cash and open positions. Updates in real-time.',
                metricPositions: 'Active Positions',
                tooltipPositions: 'Number of currently open trading positions. Monitor to ensure proper diversification.',
                metricTrades: 'Total Trades',
                tooltipTrades: 'Total number of executed trades. Track your trading activity and frequency.',
                metricPerformance: 'System Performance',
                tooltipPerformance: 'Average trade execution latency. Lower is better. Target: <50ms for optimal execution.',
                labelDailyPnl: "Today's P&L",
                labelExposure: 'Total exposure',
                labelWinRate: 'Win rate',
                labelAvgLatency: 'Avg execution latency',
                healthTitle: 'System Health',
                tooltipHealth: 'Real-time health status of critical system components: database, ML models, risk engine, and system resources.',
                loadingHealth: 'Loading health checks...',
                chartTitle: 'Portfolio Performance (24h)',
                tooltipChart: 'Real-time portfolio value over the last 24 hours. Track your performance visually.',
                tradesTitle: 'Recent Trades',
                tooltipTrades2: 'Most recent trading activity with execution details and P&L results.',
                thTime: 'Time',
                thSymbol: 'Symbol',
                thSide: 'Side',
                thQuantity: 'Quantity',
                thPrice: 'Price',
                thPnl: 'P&L',
                thStatus: 'Status',
                loadingTrades: 'No trades yet',
                labelLastUpdate: 'Last updated',
                helpBtn: '‚ùì Help',
                helpModalTitle: 'üìñ Dashboard Help Guide',
                helpWhatIs: 'üéØ What is this?',
                helpWhatIsText: 'This is a real-time monitoring dashboard for your AI-powered trading system. It provides comprehensive visibility into your portfolio performance, system health, trading activity, and risk metrics. All data updates automatically via WebSocket connection.',
                helpMetrics: 'üìä Key Metrics',
                helpPortfolio: 'Portfolio Value',
                helpPortfolioText: 'Total value of all assets. Includes cash and positions.',
                helpPositions: 'Active Positions',
                helpPositionsText: 'Number of open trades. Monitor diversification.',
                helpTrades: 'Total Trades',
                helpTradesText: 'Trading activity count. Track frequency.',
                helpWinRate: 'Win Rate',
                helpWinRateText: 'Percentage of profitable trades. Target: >55%',
                helpHealth: 'üè• Health Checks',
                helpHealthList: '<li><strong>System Resources</strong> - CPU, RAM, disk usage monitoring</li><li><strong>Database</strong> - Connection and query performance</li><li><strong>ML Models</strong> - LSTM and Meta-Learner availability</li><li><strong>Risk Engine</strong> - Kelly, correlation, gap protection status</li>',
                helpHealthStatus: '<strong style="color: #10b981;">Healthy</strong> - All systems operational | <strong style="color: #f59e0b;">Degraded</strong> - Some issues detected | <strong style="color: #ef4444;">Unhealthy</strong> - Critical failure',
                helpFeatures: '‚ö° System Features',
                helpFeaturesList: '<li><strong>ML Ensemble</strong> - LSTM + Technical indicators (70/30 blend)</li><li><strong>Meta-Learner</strong> - XGBoost filter removes 40-50% losing trades</li><li><strong>Advanced Risk</strong> - Kelly Criterion + Correlation + Gap Protection</li><li><strong>Strategies</strong> - EMA, RSI, Bollinger, Ichimoku, VWAP</li><li><strong>Realistic Slippage</strong> - 0.05-0.2% based on volume/volatility</li><li><strong>Real-time Updates</strong> - WebSocket connection every 2 seconds</li>',
                helpApi: 'üîó API Endpoints',
                helpApiList: '<li><code>GET /api/monitoring/health</code> - System health status</li><li><code>GET /api/monitoring/metrics</code> - All metrics summary</li><li><code>GET /api/monitoring/metrics/{name}</code> - Specific metric stats</li><li><code>GET /api/monitoring/metrics/{name}/timeseries</code> - Historical data</li><li><code>WS /api/monitoring/ws</code> - Real-time WebSocket updates</li>',
                helpTips: 'üí° Tips',
                helpTipsList: '<li>Monitor <strong>Win Rate</strong> - aim for >55% for consistent profitability</li><li>Watch <strong>Health Status</strong> - address degraded systems promptly</li><li>Track <strong>Exposure</strong> - keep portfolio risk under control</li><li>Check <strong>Execution Latency</strong> - ensure fast trade execution</li><li>Review <strong>Recent Trades</strong> - validate strategy performance</li><li>Use <strong>Language Switch</strong> - toggle between English and Russian</li>',
            },
            ru: {
                headerTitle: 'üöÄ AI –¢—Ä–µ–π–¥–µ—Ä - –ü–∞–Ω–µ–ª—å –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞',
                statusHealthy: '–°–∏—Å—Ç–µ–º–∞ –ó–¥–æ—Ä–æ–≤–∞',
                statusDegraded: '–°–∏—Å—Ç–µ–º–∞ –î–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–Ω–∞',
                statusUnhealthy: '–°–∏—Å—Ç–µ–º–∞ –ù–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–∞',
                alertLabel: '–í–Ω–∏–º–∞–Ω–∏–µ',
                metricPortfolio: '–°—Ç–æ–∏–º–æ—Å—Ç—å –ü–æ—Ä—Ç—Ñ–µ–ª—è',
                tooltipPortfolio: '–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤–∞—à–µ–≥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è, –≤–∫–ª—é—á–∞—è –Ω–∞–ª–∏—á–Ω—ã–µ –∏ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.',
                metricPositions: '–ê–∫—Ç–∏–≤–Ω—ã–µ –ü–æ–∑–∏—Ü–∏–∏',
                tooltipPositions: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–π. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø–æ—Ä—Ç—Ñ–µ–ª—è.',
                metricTrades: '–í—Å–µ–≥–æ –°–¥–µ–ª–æ–∫',
                tooltipTrades: '–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Ç–æ—Ä–≥–æ–≤—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.',
                metricPerformance: '–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –°–∏—Å—Ç–µ–º—ã',
                tooltipPerformance: '–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å–¥–µ–ª–æ–∫. –ß–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –ª—É—á—à–µ. –¶–µ–ª—å: <50–º—Å –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.',
                labelDailyPnl: '–ü—Ä–∏–±—ã–ª—å/–£–±—ã—Ç–æ–∫ –∑–∞ –î–µ–Ω—å',
                labelExposure: '–û–±—â–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è',
                labelWinRate: '–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª–∏',
                labelAvgLatency: '–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è',
                healthTitle: '–ó–¥–æ—Ä–æ–≤—å–µ –°–∏—Å—Ç–µ–º—ã',
                tooltipHealth: '–°–æ—Å—Ç–æ—è–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã: –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, ML –º–æ–¥–µ–ª–∏, —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã.',
                loadingHealth: '–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∑–¥–æ—Ä–æ–≤—å—è...',
                chartTitle: '–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ü–æ—Ä—Ç—Ñ–µ–ª—è (24—á)',
                tooltipChart: '–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞. –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.',
                tradesTitle: '–ü–æ—Å–ª–µ–¥–Ω–∏–µ –°–¥–µ–ª–∫–∏',
                tooltipTrades2: '–ü–æ—Å–ª–µ–¥–Ω—è—è —Ç–æ—Ä–≥–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –¥–µ—Ç–∞–ª—è–º–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ P&L.',
                thTime: '–í—Ä–µ–º—è',
                thSymbol: '–°–∏–º–≤–æ–ª',
                thSide: '–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ',
                thQuantity: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ',
                thPrice: '–¶–µ–Ω–∞',
                thPnl: 'P&L',
                thStatus: '–°—Ç–∞—Ç—É—Å',
                loadingTrades: '–ù–µ—Ç —Å–¥–µ–ª–æ–∫',
                labelLastUpdate: '–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ',
                helpBtn: '‚ùì –°–ø—Ä–∞–≤–∫–∞',
                helpModalTitle: 'üìñ –°–ø—Ä–∞–≤–∫–∞ –ø–æ –ü–∞–Ω–µ–ª–∏',
                helpWhatIs: 'üéØ –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?',
                helpWhatIsText: '–≠—Ç–æ –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≤–∞—à–µ–π —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º. –û–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è, —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã, —Ç–æ—Ä–≥–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –º–µ—Ç—Ä–∏–∫ —Ä–∏—Å–∫–∞. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.',
                helpMetrics: 'üìä –û—Å–Ω–æ–≤–Ω—ã–µ –ú–µ—Ç—Ä–∏–∫–∏',
                helpPortfolio: '–°—Ç–æ–∏–º–æ—Å—Ç—å –ü–æ—Ä—Ç—Ñ–µ–ª—è',
                helpPortfolioText: '–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–æ–≤. –í–∫–ª—é—á–∞–µ—Ç –Ω–∞–ª–∏—á–Ω—ã–µ –∏ –ø–æ–∑–∏—Ü–∏–∏.',
                helpPositions: '–ê–∫—Ç–∏–≤–Ω—ã–µ –ü–æ–∑–∏—Ü–∏–∏',
                helpPositionsText: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π.',
                helpTrades: '–í—Å–µ–≥–æ –°–¥–µ–ª–æ–∫',
                helpTradesText: '–°—á–µ—Ç—á–∏–∫ —Ç–æ—Ä–≥–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —á–∞—Å—Ç–æ—Ç—É.',
                helpWinRate: '–ü—Ä–æ—Ü–µ–Ω—Ç –ü—Ä–∏–±—ã–ª–∏',
                helpWinRateText: '–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫. –¶–µ–ª—å: >55%',
                helpHealth: 'üè• –ü—Ä–æ–≤–µ—Ä–∫–∏ –ó–¥–æ—Ä–æ–≤—å—è',
                helpHealthList: '<li><strong>–°–∏—Å—Ç–µ–º–Ω—ã–µ –†–µ—Å—É—Ä—Å—ã</strong> - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU, RAM, –¥–∏—Å–∫–∞</li><li><strong>–ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö</strong> - —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤</li><li><strong>ML –ú–æ–¥–µ–ª–∏</strong> - –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å LSTM –∏ –ú–µ—Ç–∞-–æ–±—É—á–µ–Ω–∏—è</li><li><strong>–°–∏—Å—Ç–µ–º–∞ –†–∏—Å–∫–æ–≤</strong> - —Å—Ç–∞—Ç—É—Å Kelly, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏, –∑–∞—â–∏—Ç—ã –æ—Ç –≥—ç–ø–æ–≤</li>',
                helpHealthStatus: '<strong style="color: #10b981;">–ó–¥–æ—Ä–æ–≤</strong> - –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç | <strong style="color: #f59e0b;">–î–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–Ω</strong> - –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã | <strong style="color: #ef4444;">–ù–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω</strong> - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ–π',
                helpFeatures: '‚ö° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –°–∏—Å—Ç–µ–º—ã',
                helpFeaturesList: '<li><strong>ML –ê–Ω—Å–∞–º–±–ª—å</strong> - LSTM + –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (—Å–º–µ—Å—å 70/30)</li><li><strong>–ú–µ—Ç–∞-–æ–±—É—á–µ–Ω–∏–µ</strong> - XGBoost —Ñ–∏–ª—å—Ç—Ä —É–±–∏—Ä–∞–µ—Ç 40-50% —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫</li><li><strong>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –†–∏—Å–∫–∏</strong> - –ö—Ä–∏—Ç–µ—Ä–∏–π –ö–µ–ª–ª–∏ + –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è + –ó–∞—â–∏—Ç–∞ –æ—Ç –ì—ç–ø–æ–≤</li><li><strong>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏</strong> - EMA, RSI, Bollinger, Ichimoku, VWAP</li><li><strong>–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π Slippage</strong> - 0.05-0.2% –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—ä–µ–º–∞/–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏</li><li><strong>–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –†–µ–∞–ª—å–Ω–æ–º –í—Ä–µ–º–µ–Ω–∏</strong> - WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã</li>',
                helpApi: 'üîó API Endpoints',
                helpApiList: '<li><code>GET /api/monitoring/health</code> - –°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã</li><li><code>GET /api/monitoring/metrics</code> - –°–≤–æ–¥–∫–∞ –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫</li><li><code>GET /api/monitoring/metrics/{name}</code> - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏</li><li><code>GET /api/monitoring/metrics/{name}/timeseries</code> - –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ</li><li><code>WS /api/monitoring/ws</code> - WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li>',
                helpTips: 'üí° –°–æ–≤–µ—Ç—ã',
                helpTipsList: '<li>–°–ª–µ–¥–∏—Ç–µ –∑–∞ <strong>–ü—Ä–æ—Ü–µ–Ω—Ç–æ–º –ü—Ä–∏–±—ã–ª–∏</strong> - —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ >55% –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏</li><li>–ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ <strong>–ó–¥–æ—Ä–æ–≤—å–µ–º</strong> - –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ —Ä–µ—à–∞–π—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º</li><li>–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ <strong>–≠–∫—Å–ø–æ–∑–∏—Ü–∏—é</strong> - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ —Ä–∏—Å–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è</li><li>–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ <strong>–ó–∞–¥–µ—Ä–∂–∫—É –ò—Å–ø–æ–ª–Ω–µ–Ω–∏—è</strong> - –æ–±–µ—Å–ø–µ—á—å—Ç–µ –±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫</li><li>–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ <strong>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –°–¥–µ–ª–∫–∏</strong> - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</li><li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <strong>–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –Ø–∑—ã–∫–∞</strong> - –ø–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –º–µ–∂–¥—É –∞–Ω–≥–ª–∏–π—Å–∫–∏–º –∏ —Ä—É—Å—Å–∫–∏–º</li>',
            }
        };

        let currentLang = 'en';

        function switchLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];

            // Update all text elements
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    if (key.includes('List')) {
                        element.innerHTML = t[key];
                    } else {
                        element.textContent = t[key];
                    }
                }
            });

            // Update button states
            document.getElementById('btnEn').classList.toggle('active', lang === 'en');
            document.getElementById('btnRu').classList.toggle('active', lang === 'ru');

            // Store preference
            localStorage.setItem('dashboardLang', lang);
        }

        // Load saved language preference
        const savedLang = localStorage.getItem('dashboardLang') || 'en';
        if (savedLang === 'ru') {
            switchLanguage('ru');
        }

        // Modal functions
        function openHelp() {
            document.getElementById('helpModal').style.display = 'block';
        }

        function closeHelp() {
            document.getElementById('helpModal').style.display = 'none';
        }

        // Close modal on outside click
        window.onclick = function(event) {
            const modal = document.getElementById('helpModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // WebSocket connection
        let ws = null;
        let perfChart = null;
        const perfData = [];

        function connectWebSocket() {
            const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsUrl = `${protocol}//${window.location.host}/api/monitoring/ws`;

            ws = new WebSocket(wsUrl);

            ws.onopen = () => {
                console.log('WebSocket connected');
                document.getElementById('statusIndicator').style.background = '#10b981';
            };

            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                if (data.type === 'metrics_update') {
                    updateDashboard(data.data);
                }
            };

            ws.onerror = (error) => {
                console.error('WebSocket error:', error);
                document.getElementById('statusIndicator').style.background = '#ef4444';
            };

            ws.onclose = () => {
                console.log('WebSocket disconnected');
                document.getElementById('statusIndicator').style.background = '#f59e0b';
                // Reconnect after 5 seconds
                setTimeout(connectWebSocket, 5000);
            };
        }

        function updateDashboard(data) {
            // Update portfolio metrics
            const metrics = data.metrics || {};

            const portfolioEquity = metrics['portfolio.equity']?.last || 0;
            const dailyPnl = metrics['portfolio.pnl_daily']?.last || 0;
            const positionCount = metrics['portfolio.position_count']?.last || 0;
            const tradeCount = metrics['trade.count']?.count || 0;
            const avgLatency = metrics['trade.execution_latency_ms']?.mean || 0;

            document.getElementById('portfolioValue').textContent = `$${portfolioEquity.toLocaleString()}`;
            document.getElementById('dailyPnl').textContent = `$${dailyPnl.toFixed(2)} (${(dailyPnl/portfolioEquity*100).toFixed(2)}%)`;
            document.getElementById('dailyPnl').className = dailyPnl >= 0 ? 'positive' : 'negative';

            document.getElementById('positionCount').textContent = positionCount;
            document.getElementById('tradeCount').textContent = tradeCount;
            document.getElementById('avgLatency').textContent = `${avgLatency.toFixed(0)}ms`;

            // Update timestamp
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();

            // Update performance chart
            perfData.push({
                time: new Date().getTime(),
                value: portfolioEquity,
            });

            // Keep only last 50 points
            if (perfData.length > 50) {
                perfData.shift();
            }

            updateChart();
        }

        function updateChart() {
            if (!perfChart) {
                const ctx = document.getElementById('perfChart').getContext('2d');
                perfChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        datasets: [{
                            label: currentLang === 'en' ? 'Portfolio Value' : '–°—Ç–æ–∏–º–æ—Å—Ç—å –ü–æ—Ä—Ç—Ñ–µ–ª—è',
                            data: perfData.map(p => ({ x: p.time, y: p.value })),
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: 'minute'
                                },
                                grid: {
                                    color: '#334155'
                                },
                                ticks: {
                                    color: '#94a3b8'
                                }
                            },
                            y: {
                                grid: {
                                    color: '#334155'
                                },
                                ticks: {
                                    color: '#94a3b8',
                                    callback: (value) => `$${value.toLocaleString()}`
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            } else {
                perfChart.data.datasets[0].data = perfData.map(p => ({ x: p.time, y: p.value }));
                perfChart.data.datasets[0].label = currentLang === 'en' ? 'Portfolio Value' : '–°—Ç–æ–∏–º–æ—Å—Ç—å –ü–æ—Ä—Ç—Ñ–µ–ª—è';
                perfChart.update('none');
            }
        }

        async function fetchHealthChecks() {
            try {
                const response = await fetch('/api/monitoring/health');
                const health = await response.json();

                const checksDiv = document.getElementById('healthChecks');
                checksDiv.innerHTML = '';

                if (health.checks) {
                    health.checks.forEach(check => {
                        const div = document.createElement('div');
                        div.className = `health-check ${check.status}`;
                        div.innerHTML = `
                            <div>
                                <strong>${check.name}</strong>
                                <div style="font-size: 0.85em; color: #64748b;">${check.message}</div>
                            </div>
                            <div class="badge ${check.status === 'healthy' ? 'success' : check.status === 'degraded' ? 'warning' : 'error'}">
                                ${check.status}
                            </div>
                        `;
                        checksDiv.appendChild(div);
                    });
                }

                // Update system status
                const statusKey = `status${health.status.charAt(0).toUpperCase() + health.status.slice(1)}`;
                document.getElementById('statusText').textContent = translations[currentLang][statusKey] || `System ${health.status}`;
                document.getElementById('statusIndicator').style.background =
                    health.status === 'healthy' ? '#10b981' :
                    health.status === 'degraded' ? '#f59e0b' : '#ef4444';

            } catch (error) {
                console.error('Failed to fetch health checks:', error);
            }
        }

        // Initialize
        connectWebSocket();
        fetchHealthChecks();
        setInterval(fetchHealthChecks, 30000); // Update health every 30s
    </script>
</body>
</html>
